<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ª≠a H√†ng Gi√†y D√©p BAOBAO</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <script defer src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <!-- Thanh ƒëi·ªÅu h∆∞·ªõng -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand logo-container" href="#">
                <img src="Anhlogo.png" alt="BAOBAO.vn" class="logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">TRANG CH·ª¶</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="goToLastInvoice()">ƒê∆†N H√ÄNG</a>
                      </li>                      
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            S·∫¢N PH·∫®M
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#" onclick="showProducts('giay')">Gi√†y</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showProducts('dep')">D√©p</a></li>
                        </ul>                                               
                    </li>
                </ul>
                <div class="search-bar py-3 bg-dark">
                    <div class="container">
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-search"></i></span>
                            <input type="text" class="form-control" placeholder="L·ªçc s·∫£n ph·∫©m ph√π h·ª£p" id="search-input">
                            <button class="btn btn-outline-light" type="button" id="clear-search">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="navbar-nav">
                    <!-- Dropdown khi ƒë√£ ƒëƒÉng nh·∫≠p -->
                    <li class="nav-item dropdown" id="user-dropdown" style="display: none;">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user"></i>
                            <span id="user-name-display"></span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="profile.html"><i class="fas fa-user-circle me-2"></i>H·ªì s∆°</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>ƒêƒÉng xu·∫•t</a></li>
                        </ul>
                    </li>
                    
                    <!-- Icon ƒëƒÉng nh·∫≠p (khi ch∆∞a ƒëƒÉng nh·∫≠p) -->
                    <li class="nav-item dropdown" id="login-icon">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="login.html"><i class="fas fa-sign-in-alt me-2"></i>ƒêƒÉng nh·∫≠p</a></li>
                        </ul>
                    </li>
                    
                    <!-- Gi·ªè h√†ng -->
                    <li class="nav-item">
                        <a class="nav-link position-relative" href="cart.html">
                            <i class="fas fa-shopping-bag"></i>
                            <span class="badge cart-badge" id="cart-count">0</span>
                        </a>
                    </li>               
                </ul>
            </div>
        </div>
    </nav>
    
 <!-- Danh s√°ch s·∫£n ph·∫©m -->
 <div class="container mt-4">
    <div class="row" id="product-list">
        <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã t·∫°i ƒë√¢y -->
    </div>
</div>

<script>
    const products = {
    giay: [
        { name: "Gi√†y Th·ªÉ Thao ƒêen", price: "750.000ƒë", image: "Anh1.1.png" },
        { name: "Gi√†y Sneaker Tr·∫Øng", price: "890.000ƒë", image: "Anh2.1.png" },
        { name: "Gi√†y Nike Air Max", price: "999.000ƒë", image: "Anh3.1.png" }
    ],
    dep: [
        { name: "D√©p L√™ Nam", price: "300.000ƒë", image: "Anh4.1.png" },
        { name: "D√©p Sandal N·ªØ", price: "450.000ƒë", image: "Anh5.1.png" }
    ]
};
function renderProducts() {
let productList = document.getElementById("product-list");
productList.innerHTML = ""; // X√≥a n·ªôi dung c≈© ƒë·ªÉ tr√°nh tr√πng l·∫∑p

let index = 1; // B·∫Øt ƒë·∫ßu ƒë√°nh s·ªë trang t·ª´ SP1.html

for (let category in products) {
    products[category].forEach(product => {
        let productPage = `SP${index}.html`;  // SP1.html, SP2.html, SP3.html...
        index++; // TƒÉng index ƒë·ªÉ m·ªói s·∫£n ph·∫©m c√≥ m·ªôt trang kh√°c nhau

        let url = `./${productPage}?name=${encodeURIComponent(product.name)}&price=${encodeURIComponent(product.price)}&image=${encodeURIComponent(product.image)}`;

        let productHTML = `
            <div class="col-md-4">
                <div class="card">
                    <a href="${url}">
                        <img src="${product.image}" class="card-img-top" alt="${product.name}">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title">${product.name}</h5>
                        <p class="card-text">${product.price}</p>
                        <a href="${url}" class="btn btn-primary">Xem chi ti·∫øt</a>
                    </div>
                </div>
            </div>
        `;
        productList.innerHTML += productHTML;
    });
}
}
// G·ªçi h√†m ƒë·ªÉ hi·ªÉn th·ªã s·∫£n ph·∫©m
document.addEventListener("DOMContentLoaded", renderProducts);
</script>
<script>
    // H√†m l·∫•y tham s·ªë t·ª´ URL
function getQueryParam(param) {
    let urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

// Hi·ªÉn th·ªã t√™n s·∫£n ph·∫©m t·ª´ URL
document.addEventListener("DOMContentLoaded", function () {
    let productName = getQueryParam("name");
    if (productName) {
        document.getElementById("product-title").textContent = productName;
    }
});
function goToLastInvoice() {
    const orders = JSON.parse(localStorage.getItem('orders')) || [];

    if (orders.length === 0) {
        alert('B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o!');
        return;
    }

    const lastOrder = orders[orders.length - 1];
    // ƒêi·ªÅu h∆∞·ªõng sang trang invoice.html v·ªõi ID ƒë∆°n h√†ng
    window.location.href = 'invoice.html?id=' + lastOrder.id;
}
// ============ QU·∫¢N L√ù ƒêƒÇNG NH·∫¨P ============
function checkLoginStatus() {
    const user = JSON.parse(localStorage.getItem('currentUser'));
    const userDropdown = document.getElementById('user-dropdown');
    const loginIcon = document.getElementById('login-icon');

    if (user) {
        // ƒê√£ ƒëƒÉng nh·∫≠p
        userDropdown.style.display = 'block';
        loginIcon.style.display = 'none';
        document.getElementById('user-name-display').textContent = user.name;
        
        // Ki·ªÉm tra v√† chuy·ªÉn gi·ªè h√†ng t·∫°m sang gi·ªè h√†ng user n·∫øu c√≥
        const tempCart = JSON.parse(localStorage.getItem('tempCart')) || [];
        if (tempCart.length > 0) {
            const carts = JSON.parse(localStorage.getItem('carts')) || {};
            carts[user.id] = [...(carts[user.id] || []), ...tempCart];
            localStorage.setItem('carts', JSON.stringify(carts));
            localStorage.removeItem('tempCart');
        }
    } else {
        // Ch∆∞a ƒëƒÉng nh·∫≠p
        userDropdown.style.display = 'none';
        loginIcon.style.display = 'block';
    }
    
    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng (t·ª± ƒë·ªông l·∫•y ƒë√∫ng gi·ªè h√†ng c·ªßa user hi·ªán t·∫°i ho·∫∑c gi·ªè t·∫°m)
    updateCartCount();
}

function logout() {
    // X√≥a d·ªØ li·ªáu ng∆∞·ªùi d√πng
    localStorage.removeItem('currentUser');
    
    // X√≥a gi·ªè h√†ng t·∫°m (n·∫øu d√πng)
    localStorage.removeItem('tempCart');
    
    // C·∫≠p nh·∫≠t giao di·ªán
    checkLoginStatus();
    
    // Chuy·ªÉn v·ªÅ trang ch·ªß
    window.location.href = 'index.html';
}

// ============ QU·∫¢N L√ù GI·ªé H√ÄNG ============
function updateCartCount() {
    const user = JSON.parse(localStorage.getItem('currentUser'));
    let cartItems = [];
    
    if (user) {
        // L·∫•y gi·ªè h√†ng t·ª´ carts[userId] n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p
        const carts = JSON.parse(localStorage.getItem('carts')) || {};
        cartItems = carts[user.id] || [];
    } else {
        // L·∫•y gi·ªè h√†ng t·∫°m n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p
        cartItems = JSON.parse(localStorage.getItem('tempCart')) || [];
    }
    
    // T√≠nh t·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m (x·ª≠ l√Ω c·∫£ tr∆∞·ªùng h·ª£p c√≥ quantity v√† kh√¥ng c√≥)
    const count = cartItems.reduce((total, item) => total + (item.quantity || 1), 0);
    document.getElementById('cart-count').textContent = count;
}
checkLoginStatus();
renderProducts();
</script>
<script>
    document.getElementById("search-input").addEventListener("input", function () {
        const keyword = this.value.toLowerCase();
        const filtered = [];
    
        for (let category in products) {
            products[category].forEach(p => {
                if (p.name.toLowerCase().includes(keyword)) {
                    filtered.push(p);
                }
            });
        }
    
        // render filtered products
        let productList = document.getElementById("product-list");
        productList.innerHTML = "";
        filtered.forEach((product, i) => {
            let url = `SP${i + 1}.html`;
            productList.innerHTML += `
                <div class="col-md-4">
                    <div class="card">
                        <a href="${url}?name=${encodeURIComponent(product.name)}&price=${encodeURIComponent(product.price)}&image=${encodeURIComponent(product.image)}">
                            <img src="${product.image}" class="card-img-top">
                        </a>
                        <div class="card-body">
                            <h5>${product.name}</h5>
                            <p>${product.price}</p>
                            <a href="${url}" class="btn btn-primary">Xem chi ti·∫øt</a>
                        </div>
                    </div>
                </div>
            `;
        });
    });
    
    document.getElementById("clear-search").addEventListener("click", function () {
        document.getElementById("search-input").value = "";
        renderProducts();
    });
    function showProducts(category) {
    let productList = document.getElementById("product-list");
    productList.innerHTML = ""; // X√≥a n·ªôi dung c≈©

    let filteredProducts = products[category] || []; // L·∫•y danh s√°ch s·∫£n ph·∫©m theo category

    filteredProducts.forEach((product, index) => {
        let productPage = `SP${index + 1}.html`;  // SP1.html, SP2.html, SP3.html...
        let url = `./${productPage}?category=${category}&index=${index}`;

        // ‚úÖ L∆∞u s·∫£n ph·∫©m v√†o LocalStorage ƒë·ªÉ trang chi ti·∫øt c√≥ th·ªÉ l·∫•y d·ªØ li·ªáu
        localStorage.setItem(`product_${category}_${index}`, JSON.stringify(product));

        let productHTML = `
            <div class="col-md-4">
                <div class="card product-card">
                    <a href="${url}">
                        <img src="${product.image}" class="card-img-top" alt="${product.name}">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title">${product.name}</h5>
                        <p class="card-text">${product.price}</p>
                        <a href="${url}" class="btn btn-primary">Xem chi ti·∫øt</a>
                    </div>
                </div>
            </div>
        `;
        productList.innerHTML += productHTML;
    });
}
function showProductDetail(containerId) {
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get("category");
    const index = urlParams.get("index");

    if (category && index !== null) {
        const productData = localStorage.getItem(`product_${category}_${index}`);
        if (productData) {
            const product = JSON.parse(productData);
            document.getElementById(containerId).innerHTML = `
                <div class="product-detail">
                    <h2>${product.name}</h2>
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <p>Gi√°: ${product.price}</p>
                     <a href="${url}" class="btn btn-primary">Xem chi ti·∫øt</a>
                </div>
            `;
        } else {
            document.getElementById(containerId).innerHTML = "<p>S·∫£n ph·∫©m kh√¥ng t·ªìn t·∫°i.</p>";
        }
    } else {
        document.getElementById(containerId).innerHTML = "<p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m.</p>";
    }
}

// ‚úÖ G·ªçi h√†m khi trang chi ti·∫øt ƒë∆∞·ª£c t·∫£i
document.addEventListener("DOMContentLoaded", () => showProductDetail("SP"));
</script>
    <script>
        // L·∫•y gi·ªè h√†ng t·ª´ LocalStorage ho·∫∑c t·∫°o m·∫£ng m·ªõi n·∫øu ch∆∞a c√≥
        function getCart() {
            return JSON.parse(localStorage.getItem("cart")) || [];
        }
        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng tr√™n navbar
        function updateCartCount() {
            const cart = getCart();
            document.getElementById("cart-count").textContent = cart.length;
        }
    
        // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng
function addToCart(product) {
    const user = JSON.parse(localStorage.getItem('currentUser'));
    
    if (user) {
        // ƒê√£ ƒëƒÉng nh·∫≠p: th√™m v√†o gi·ªè h√†ng user
        const carts = JSON.parse(localStorage.getItem('carts')) || {};
        carts[user.id] = carts[user.id] || [];
        carts[user.id].push(product);
        localStorage.setItem('carts', JSON.stringify(carts));
        updateCartCount(user.id);
    } else {
        // Ch∆∞a ƒëƒÉng nh·∫≠p: l∆∞u v√†o gi·ªè h√†ng t·∫°m
        const tempCart = JSON.parse(localStorage.getItem('tempCart')) || [];
        tempCart.push(product);
        localStorage.setItem('tempCart', JSON.stringify(tempCart));
        document.getElementById('cart-count').textContent = tempCart.length;
    }
    
    alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
}
        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng khi t·∫£i trang
        updateCartCount();
       
    </script>
    <footer class="footer">
        <div class="container">
            <div class="footer-left">
                <img src="Anhlogo.png" alt="BAOBAO Logo" class="footer-logo">
            </div>
            <div class="footer-info">
                <h3>C·ª≠a H√†ng Gi√†y D√©p BAOBAO</h3>
                <p>üìç S·ªë 123 ƒê∆∞·ªùng Nguy·ªÖn Th√°i S∆°n, Ph∆∞·ªùng 1, Qu·∫≠n G√≤ v·∫•p, Th√†nh ph·ªë H·ªì Ch√≠ Minh, Vi·ªát Nam</p>
                <p>üìú ƒêKKD: 0101400822 ng√†y 13/08/2003 T·∫°i S·ªü K·∫ø Ho·∫°ch v√† ƒê·∫ßu T∆∞ Th√†nh Ph·ªë H·ªì Ch√≠ Minh</p>
                <p>üìû ƒêi·ªán tho·∫°i: <strong>1900633083</strong></p>
                <p>üìß Email: <a href="mailto:baobaovietnam2023@gmail.com">baobaovietnam2023@gmail.com</a></p>
                <img src="bo-cong-thuong.png" alt="B·ªô C√¥ng Th∆∞∆°ng" class="certification">
            </div>
            <div class="footer-social">
                <a href="#"><img src="Facebook.png" alt="Facebook"></a>
                <a href="#"><img src="Instagram.png" alt="Instagram"></a>
                <a href="#"><img src="Youtube.png" alt="YouTube"></a>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="footer-links">
                <a href="#">ƒêI·ªÄU KHO·∫¢N D·ªäCH V·ª§</a> |
                <a href="#">CH√çNH S√ÅCH B·∫¢O M·∫¨T</a> |
                <a href="#">CH√çNH S√ÅCH THANH TO√ÅN</a> |
                <a href="#">CH√çNH S√ÅCH V·∫¨N CHUY·ªÇN</a> |
                <a href="#">CH√çNH S√ÅCH ƒê·ªîI TR·∫¢</a> |
                <a href="#">GI·ªöI THI·ªÜU V√Ä LI√äN H·ªÜ</a>
            </div>
            <p class="copyright">Copyright ¬© 2025 C·ª≠a H√†ng Gi√†y D√©p BAOBAO. Powered by Haravan</p>
        </div>
    </footer>
</body>
</html>